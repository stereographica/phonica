---
description: 
globs: 
alwaysApply: true
---
# テストについて

## TDD
TDD を実施する。コードを生成するときは、それに対応するユニットテストを常に生成する。コードを追加で修正したとき、`npm test` がパスすることを常に確認する。

```ts
function add(a: number, b: number) { return a + b }
test("1+2=3", () => {
  expect(add(1, 2)).toBe(3);
});
```

## カバレッジ

テストカバレッジ100%を目指す。`*.ts` に対して、`*.test.ts` でユニットテストを書く。test.ts がない実装に対して、他のテストを参考にテストコードを追加

1. `npm test` を実行して、現在のカバレッジを取得
2. 今の状態から最もカバレッジが上がるテストコードを考察してから追加
3. 再度カバレッジを計測して、数値が向上していることを確認

ユーザが満足するまで、テスト生成を繰り返す

## 開発サーバが正しく実行されることの確認

ユニットテストが全てパスし、要求されているカバレッジを満たしていることが確認出来次第、開発サーバが正しく起動することを確認する。起動に失敗した場合は、起動に成功するまで修正する。

開発サーバが起動した場合は、ユーザに動作確認を要求する。ユーザから不具合が報告された場合は、コードを修正し不具合を解消するとともに、不具合の内容をユニットテストの新たなエッジケースとして追加する。テストケースを追加後、再びユニットテストを実行し、全てのテストケースがパスすること、テストカバレッジが十分であることを確認する。ユーザが満足するまで、テスト生成と実装の修正を繰り返す
