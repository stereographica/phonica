# 今後の開発タスク一覧

## 凡例
- **優先度**: 最優先, 高, 中, 低
- **状態**: 未着手, 進行中, 完了, 保留
- **担当者**: 未定 (アサイン後に更新)

---

## 【フェーズ1】コア機能の確立 (アプリケーションとして最低限動作する状態を目指す)

### 1. 素材管理コア (優先度: 最優先)
    - **タスク1.1: 素材一覧ページUI - 基本表示** (状態: 進行中, 担当者: AI)
        - [x] テーブル形式での素材一覧表示 (タイトル、録音日など主要項目)
        - [x] 基本的なページネーション機能 (カスタム実装からshadcn/ui Paginationへの置き換え検討は別途)
        - [x] ソート機能 (主要項目でのソート)
        - [x] 基本フィルター機能 (タイトル、タグ - 「Apply Filters」ボタンでの適用)
        - [ ] **表示列カスタマイズ機能** (ドロップダウン等で表示する列を選択可能にする) (画面仕様書: C-1-1) (優先度: 低)
    - [x] **タスク1.1.1**: 素材一覧取得API実装（フィルタリング、ソート、ページネーション対応） (状態: 完了, 担当者: AI) // 既存タスク2.1.2を移動
    - [x] **タスク1.1.2**: 素材新規登録フォームUI実装 (状態: 完了, 担当者: AI) // 既存タスク2.2.1を移動
    - [x] **タスク1.1.3**: 素材新規登録API実装（基本情報、ローカルディスクへのファイル保存） (状態: 完了, 担当者: AI) // 既存タスク2.2.2を移動
    - [x] **タスク1.1.4**: 素材編集フォームUI実装 (状態: 完了, 担当者: AI) // 既存タスク2.4.1を移動
    - [x] **タスク1.1.5**: 素材編集API実装（基本情報、タグ更新。ファイル差替、機材更新は別途） (状態: 完了, 担当者: AI) // 既存タスク2.4.2を移動、内容修正
    - **タスク1.2: 素材詳細表示機能** (状態: 進行中, 担当者: AI) (画面仕様書: C-4)
        - [x] 素材詳細モーダルUI実装 (一覧から遷移)
        - [x] 主要メタ情報の表示
        - [x] **音声再生機能 (wavesurfer.js 導入、波形表示)** (状態: 完了)
        - [x] **単体ファイルダウンロード機能** (状態: 完了)
        - [x] 地図表示機能（GPS情報がある場合、Leaflet.js使用 - プレースホルダー可）(状態: 完了)
    - [x] **タスク1.3: 素材削除機能** (状態: 完了, 担当者: AI) // 状態更新 (全てのサブタスク完了のため)
        - [x] 削除確認モーダル実装 (画面仕様書: C-6) // 状態更新
        - [x] 素材削除API実装（DBからの削除。ファイル物理削除は別途） // 状態更新
        - [x] 素材一覧および詳細モーダルからの削除実行 // 状態更新
    - **タスク1.4: 素材登録・編集時のファイルアップロード機能** (状態: 完了, 担当者: AI, 優先度: 最優先)
        - [x] 新規登録時のファイルアップロード機能 (UI + API) // 状態更新 (ユーザーにより完了済み)
        - [x] 編集時のファイル再アップロード・既存ファイル差し替え対応 (UI + API) // 状態更新

### 2. マスタ管理コア (優先度: 高)
    - [x] **タスク2.0.1**: 機材登録・編集API実装 (状態: 完了, 担当者: AI) // 既存タスク4.1.2を移動
    - **タスク2.1: 機材マスタ - 一覧・削除** (状態: 未着手, 担当者: 未定) (画面仕様書: E-1)
        - [ ] 機材一覧表示UI（テーブル形式）
        - [ ] 機材削除APIと連携、およびUIからの実行
    - **タスク2.2: 機材マスタ - 登録・編集UI** (状態: 未着手, 担当者: AI)
        - [ ] 機材登録・編集モーダルUI実装（「種類」ドロップダウン含む）
    - **タスク2.3: タグマスタ - 基本CRUD** (状態: 未着手, 担当者: 未定)
        - [ ] タグ管理画面UI実装（一覧表示、新規登録、リネーム、削除）(画面仕様書: E-3)
        - [ ] タグ管理API実装 (CRUD)

### 3. 安定化・基盤整備 (優先度: 中)
    - **タスク3.1: `babel-loader` / Turbopack関連の問題解決** (状態: 保留, 担当者: 未定, issue参照)
        - ユーザー確認により解決済みと判断されたが、再発防止策や根本原因のドキュメント化が必要な場合は対応。現状は様子見。
    - **タスク3.2: `eslint-disable` コメントの確認と対応** (状態: 進行中, 担当者: AI)
        - [x] `docs/issues.md` への起票済み
        - [ ] 可能なものから順次解消していく (優先度は個別に判断)
    - **タスク3.3: テストのスキップ/`act`警告の解消** (状態: 保留, 担当者: 未定, issue参照) (優先度: 中)
        - `recordedAt` 日付バリデーションテスト
        - `EquipmentFormModal.test.tsx` の `act` 警告
        - `EditMaterialPage.test.tsx` の `act` 警告
        - 素材一覧フィルター・ソートテスト (`page.test.tsx`)
        - (これらの優先度は個々の問題の複雑さや影響度によって変動)

## 【フェーズ2】機能拡充とユーザビリティ向上

### 4. 素材管理 - 利便性向上 (優先度: 中)
    - **タスク4.1: ファイルアップロード処理の堅牢化** (状態: 未着手, 担当者: 未定)
        - [ ] 素材登録・編集時の進捗表示
        - [ ] 詳細なエラーハンドリングとフィードバック
    - **タスク4.2: メタデータ自動入力 (プレースホルダーレベルでも可)** (状態: 未着手, 担当者: 未定)
        - [ ] 音声ファイルからのメタデータ自動抽出・入力機能 (録音日時, 技術メタ情報)
        - [ ] GPS座標からの位置情報自動入力機能群実装
            - [ ] GPS情報付き写真アップロードUIとEXIF情報抽出処理
            - [ ] 現在地取得ボタンとGeolocation API連携処理
            - [ ] 地図上での場所指定UIと座標取得処理 (Leaflet.js使用)
    - **タスク4.3: 素材一覧 - 詳細検索機能** (状態: 未着手, 担当者: 未定)
        - [ ] タグ以外の条件追加（例: 録音日範囲、ファイル形式など）
    - **タスク4.4: 素材一覧 - 一括操作機能** (状態: 未着手, 担当者: 未定) (画面仕様書: C-1-3)
        - [ ] ツールバー表示、アイテム選択チェックボックスUI実装
        - [ ] プロジェクトへの一括追加機能 (UI + API連携)
        - [ ] タグ一括付与機能 (UI + API連携)
        - [ ] 一括削除機能 (UI + API連携、C-6モーダル使用)
        - [ ] 一括ダウンロード用ZIP圧縮API実装 (BullMQ + Redis連携の検討)
    - **タスク4.5: 要整理素材一覧画面実装** (状態: 未着手, 担当者: 未定) (画面仕様書: C-5)
        - [ ] API設計・実装（メタ情報が不足している素材を取得）
        - [ ] フロントエンドでの表示

### 5. プロジェクト管理機能 (優先度: 高)
    - **タスク5.1: プロジェクト関連API実装** (状態: 未着手, 担当者: 未定)
        - [ ] CRUD (Prisma中間テーブル想定)
        - [ ] 素材とのリレーションシップ管理
    - **タスク5.2: プロジェクト一覧画面UI実装** (状態: 未着手, 担当者: 未定) (画面仕様書: D-1)
    - **タスク5.3: プロジェクト作成/編集モーダルUI実装** (状態: 未着手, 担当者: 未定) (画面仕様書: D-2)
    - **タスク5.4: プロジェクト詳細画面UI実装** (状態: 未着手, 担当者: 未定) (画面仕様書: D-3)

### 6. ダッシュボード機能 (優先度: 中)
    - [x] **タスク6.0.1**: 基本UI実装（プレースホルダー）(状態: 完了, 担当者: AI) // 既存タスク1.1を移動
    - **タスク6.1: 各ウィジェットのAPI設計・実装** (状態: 未着手, 担当者: 未定)
        - [ ] 要整理素材リスト (メタ情報不足の素材を取得)
        - [ ] 今日の音 (ランダムな素材取得)
        - [ ] コレクションマップ (全素材のGPS情報を取得)
        - [ ] 録音カレンダー (録音日ベースの活動集計)
        - [ ] 統計データ (タグ別件数、月別録音数など)
    - **タスク6.2: 各ウィジェットのフロントエンド実装** (状態: 未着手, 担当者: 未定) (画面仕様書: B-1-3)
        - [ ] 要整理素材リスト (表示とリンク)
        - [ ] 今日の音 (wavesurfer.js 導入、簡易再生機能)
        - [ ] コレクションマップ (Leaflet.js 導入、地図表示とピンプロット)
        - [ ] 録音カレンダー (ヒートマップ表示ライブラリ検討・導入・表示)
        - [ ] 統計データ (グラフ描画ライブラリ選定・導入・表示)
    - **タスク6.3: ウィジェットレイアウトカスタマイズ機能実装** (状態: 未着手, 担当者: 未定) (画面仕様書: B-1-2)
        - [ ] GridStack.js または類似ライブラリ導入検討
        - [ ] ドラッグ＆ドロップ、リサイズ、レイアウト保存・リセット機能

### 7. マスタ管理 - 高度化 (優先度: 中)
    - **タスク7.1: タグマスタ - 統合機能** (状態: 未着手, 担当者: 未定)
        - [ ] タグ統合UI実装 (画面仕様書: E-3)
        - [ ] タグ統合API実装 (素材関連更新)

## 【フェーズ3】品質向上とドキュメント

### 8. 品質改善 (優先度: 中～低、ただし深刻なものは高)
    - **タスク8.1: テストカバレッジ向上** (状態: 未着手, 担当者: 未定)
        - `docs/issues.md` のカバレッジ不足箇所を計画的に対応
    - **タスク8.2: APIテスト等で `console.error` が出力される問題の調査・修正** (状態: 未着手, 担当者: 未定)
        - 意図しないものは修正

### 9. ドキュメント整備 (優先度: 低)
    - [x] **タスク9.0.1**: 共通レイアウト・サイドバーナビゲーションUI実装 (状態: 完了, 担当者: AI) // 既存タスク0.1を移動
    - [x] **タスク9.0.2**: 共通レイアウト・上部固定ヘッダーUI実装 (状態: 完了, 担当者: AI) // 既存タスク0.2を移動
    - [x] **タスク9.0.3**: 共通レイアウト・グローバル検索ボックスUI実装 (状態: 完了, 担当者: AI) // 既存タスク0.2.1を移動
    - **タスク9.1: API仕様書作成** (状態: 未着手, 担当者: 未定)
    - **タスク9.2: README.md の充実** (状態: 未着手, 担当者: 未定)
        - ビルド方法、開発環境セットアップ、主要機能説明等

---
